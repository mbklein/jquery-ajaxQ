(function(f){function g(a){a=a||{};a.maxRequests=a.maxRequests||5;return{pending:0,requests:[],opts:a}}function h(a){var a=e[a],b=a.requests.shift();b&&(a.pending++,b.ajaxOptions.dequeued&&b.ajaxOptions.dequeued(b.xhr),f.ajax(b.ajaxOptions))}function i(a,b){for(var c=e[a],d=0;d<c.length;d++)c[d].xhr==b&&c.splice(d,1).xhr.abort()}var e={queue:g()};f.extend({ajaxQ:function(a,b){if(e.hasOwnProperty(a))throw"QueueError: queue '"+options.queue+"' is already defined.";else e[a]=g(b)},clearQ:function(a){var b=
e[a];if(b)for(var c=0;c<b.length;c++)i(a,b[c].xhr)}});f.ajaxTransport("ajaxQ",function(a,b,c){var d=b.complete;b.complete=function(a,b){d(a,b);var c=f;e[c].pending--;h(c)};b.dataType=b.realDataType;var f=b.ajaxQ||"queue";if(e.hasOwnProperty(f))return{send:function(){var a=f,d=e[a];d.requests.push({ajaxOptions:b,xhr:c});d.pending<=d.opts.maxRequests&&h(a)},abort:function(){i(c)}};else throw"QueueError: queue '"+a.queue+"' is not defined.";})})(jQuery);
